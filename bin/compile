#!/usr/bin/env bash
# bin/compile build_path cache_path
#
# See https://blog.heroku.com/hacking-buildpacks#compile for good documentation
#
# build - gives you a handle for the root directory of the app
# cache - gives you a location to persist build artifacts between deployments
#
build="$1" # something like /tmp/build_<uuid>
cache="$2" # /app/tmp/cache

set -e # Raise errors if anything goes wrong

# Create the config file for the daemon:
touch "${build}/config/antivirus/clamd.conf"
echo "LocalSocket /app/config/antivirus/clamd.sock" > "${build}/config/antivirus/clamd.conf"

# Create the socket file for the daemon:
touch "${build}/config/antivirus/clamd.sock"
